import React from "react";
import {TokenHeatmap} from '../components/tokenheatmap'


function normalize_dir(dir) {
  dir = dir.map((d) => {
    return d.tokens.map((t, i) => {
      return {
        token: t,
        strength: d.activations[i],
      };
    })
  })
  const max_activation = Math.max(...dir.map((d) => {
    return Math.max(...d.map((t) => t.strength));
  }));

  dir.forEach((d) => {
    d.forEach((t) => {
      t.normalized_strength = Math.max(0, t.strength / max_activation);
    });
  });
  return dir;
}

const found_dir = normalize_dir([
  {"activations": [0.005552530288696289, -0.0674964189529419, 0.9570770263671875, 0.5934834480285645, -0.7057691812515259, 0.8101756572723389, 0.4809566140174866, 9.931751251220703, 5.167137622833252, 5.162779808044434, -3.0566225051879883, 6.912841796875, 5.156696319580078, 7.077234268188477, 10.490768432617188, 3.575000524520874, 2.361219644546509, 2.3667285442352295, 5.344596862792969, -3.1658811569213867, 6.254464149475098, 13.580575942993164, 15.729272842407227, 3.677375078201294, 10.132835388183594, 16.50031280517578, 6.820892333984375, 11.460095405578613, -0.17580127716064453, 8.28676986694336, 5.292068958282471, 36.04554748535156, 38.4487419128418, 3.523665428161621, 14.168191909790039, 14.239317893981934, 12.643244743347168, 9.043678283691406, 31.848779678344727, 8.564619064331055, 31.320941925048828, 38.984153747558594, 0.9485980272293091, 0.08364039659500122, 1.4188388586044312, 2.9731154441833496, 0.8715624809265137, 0.9598097801208496, 2.80008602142334, 2.2183008193969727, 10.9293851852417, 8.399447441101074, -1.0315319299697876, 9.124592781066895, 11.453731536865234, 14.403820037841797, 3.7721617221832275, 7.236357688903809, 14.507540702819824, 6.284649848937988, 12.404205322265625, 2.844999313354492, 12.596382141113281, 39.79949188232422], "tokens": ["\n", "\n", "Today", "\n", "\n", "Consider", "able", " clouds", " this", " morning", ".", " Some", " decrease", " in", " clouds", " later", " in", " the", " day", ".", " A", " stray", " shower", " or", " thunder", "storm", " is", " possible", ".", " High", " near", " 85", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph", "..", "\n", "\n", "Tonight", "\n", "\n", "Part", "ly", " cloudy", " skies", ".", " A", " stray", " shower", " or", " thunder", "storm", " is", " possible", ".", " Low", " 71"]},
  {"activations": [0.42952775955200195, -0.5678833723068237, 1.5900638103485107, 3.2899866104125977, 10.835630416870117, 3.256018877029419, 7.8592329025268555, 11.053078651428223, -2.0433270931243896, 9.024372100830078, 11.444145202636719, 15.202902793884277, 8.46084213256836, 7.922279357910156, 11.258038520812988, 1.1508314609527588, 8.786460876464844, 34.82587432861328, 41.044471740722656, 7.215620994567871, 15.656621932983398, 13.264358520507812, 17.470317840576172, 11.245525360107422, 31.437013626098633, 7.536483287811279, 30.52842903137207, 39.25334930419922, 12.152469635009766, 11.464811325073242, 9.898473739624023, 17.36856460571289, 36.45711898803711, 22.366554260253906, 3.7376136779785156, 0.6903126835823059, 2.365821361541748, 1.264771819114685, 1.2944790124893188, 0.9140090942382812, 8.898835182189941, 11.908746719360352, 10.443807601928711, 6.854601860046387, 6.851101875305176, 1.0442777872085571, 6.272222518920898, 7.925211429595947, 6.727502822875977, 3.5161640644073486, 7.386012077331543, 10.65537166595459, 13.35828685760498, 11.058891296386719, 2.340831756591797, 9.882108688354492, 12.74220085144043, 11.124070167541504, 5.007976055145264, 8.846000671386719, 9.154837608337402, 4.79661750793457, 14.349515914916992, 37.66172790527344], "tokens": ["\n", "\n", "Sc", "attered", " showers", " and", " thunder", "storms", ".", " A", " few", " storms", " may", " be", " severe", ".", " High", " 78", "F", ".", " Winds", " SS", "W", " at", " 5", " to", " 10", " mph", ".", " Chance", " of", " rain", " 50", "%", "..", "\n", "\n", "Tonight", "\n", "\n", "Thunder", "storms", " likely", " this", " evening", ".", " Then", " the", " chance", " of", " scattered", " thunder", "storms", " overnight", ".", " A", " few", " storms", " may", " be", " severe", ".", " Low", " 59"]},
  {"activations": [1.0459399223327637, 0.9332543015480042, 0.008949637413024902, 2.95160174369812, 3.3967225551605225, 2.7853994369506836, 0.6749970316886902, -0.3172588348388672, 0.4117170572280884, 0.5567483305931091, -0.7643318772315979, -1.5264596939086914, 9.452980041503906, 3.7639942169189453, 0.5091729164123535, 2.266718864440918, 2.36820650100708, 8.045964241027832, 3.65122127532959, 10.958728790283203, 1.6810108423233032, 3.8150553703308105, 4.369269371032715, -0.9818880558013916, 10.16134262084961, 7.593829154968262, 0.047315776348114014, 9.22941780090332, 35.88896942138672, 37.543983459472656, 4.6853227615356445, 14.438240051269531, 10.284158706665039, 12.351310729980469, 21.3812255859375, 8.427165985107422, 10.378251075744629, 7.883867263793945, 16.824928283691406, 35.95543670654297, 21.76656150817871, 3.5077803134918213, 0.19175392389297485, 1.6526528596878052, 2.4182238578796387, 1.3455456495285034, 1.326671838760376, 10.185538291931152, 12.105850219726562, 10.610406875610352, 2.783491373062134, 14.460659980773926, 8.176252365112305, 38.639442443847656, 35.636146545410156, 7.693148612976074, 16.222230911254883, 14.402002334594727, 13.952146530151367, 9.646228790283203, 32.39500427246094, 9.241619110107422, 31.68878173828125, 37.019813537597656], "tokens": [",", " IA", " (", "5", "27", "32", ")", "\n", "\n", "Today", "\n", "\n", "Rain", " early", "...", "then", " remaining", " cloudy", " with", " showers", " in", " the", " afternoon", ".", " Thunder", " possible", ".", " High", " 66", "F", ".", " Winds", " light", " and", " variable", ".", " Chance", " of", " rain", " 80", "%", "..", "\n", "\n", "Tonight", "\n", "\n", "Thunder", "storms", " likely", ".", " Low", " around", " 60", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph"]},
  {"activations": [-1.1919770240783691, 0.9383041858673096, -0.4310213327407837, 4.968725204467773, 3.2586700916290283, 2.201808452606201, 0.3842925429344177, -0.2955473065376282, 1.6247639656066895, 1.3717894554138184, -0.14255976676940918, 5.9035444259643555, 6.5697340965271, 4.511435508728027, -0.41378819942474365, 2.928313970565796, 2.2160277366638184, 1.5760400295257568, 5.4483113288879395, 4.479285717010498, -1.5451655387878418, -1.7542318105697632, 7.185958385467529, 34.462032318115234, 35.00083923339844, 3.3545022010803223, 13.250338554382324, 14.414718627929688, 13.004070281982422, 10.669445991516113, 29.94632339477539, 9.260395050048828, 30.726476669311523, 38.90087890625, 0.7631706595420837, 0.4471590518951416, 2.932220220565796, 2.8794257640838623, 2.083251953125, 0.9207537174224854, 7.72170352935791, 12.532669067382812, 5.619641304016113, 11.46167278289795, 10.39884090423584, 5.320130825042725, 6.770552158355713, 4.323988437652588, 5.79982852935791, 10.773984909057617, 7.665514945983887, 7.2366180419921875, -0.14590537548065186, 13.390791893005371, 38.839576721191406, 37.58385467529297, 6.827215671539307, 16.1040096282959, 18.575611114501953, 11.105873107910156, 30.902191162109375, 11.85919189453125, 29.103404998779297, 34.92573547363281], "tokens": [",", " OK", " (", "740", "78", ")", "\n", "\n", "Today", "\n", "\n", "Cloud", "y", " early", " with", " pe", "eks", " of", " sunshine", " expected", " late", ".", " High", " 79", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph", "..", "\n", "\n", "Tonight", "\n", "\n", "A", " shower", " or", " two", " possible", " this", " evening", " with", " partly", " cloudy", " skies", " overnight", ".", " Low", " 57", "F", ".", " Winds", " E", " at", " 5", " to", " 10", " mph"]},
  {"activations": [6.925813674926758, 3.2419216632843018, 1.5704234838485718, -0.45333486795425415, 0.016943395137786865, 0.25642478466033936, 0.044499754905700684, -1.159388542175293, 5.579755783081055, -1.0331194400787354, 2.0878539085388184, 9.305901527404785, 3.9145636558532715, 6.877334117889404, 1.3508187532424927, 2.566877841949463, 3.603618621826172, 2.832070827484131, 4.14794921875, 3.6916770935058594, 1.1174061298370361, 6.616146564483643, 4.064640522003174, 2.9375505447387695, 4.494815826416016, -2.79538631439209, 6.2477827072143555, 2.8274340629577637, 6.149773597717285, 2.4252803325653076, 5.281551361083984, 10.822874069213867, 15.198904037475586, -2.4288101196289062, 8.184410095214844, 4.964115619659424, 34.32697296142578, 33.792083740234375, 1.6674758195877075, 13.943502426147461, 10.282291412353516, 12.14151382446289, 20.79564666748047, 1.6388676166534424, -1.7104125022888184, -0.8064560294151306, 2.4458370208740234, 2.3035292625427246, 1.0872408151626587, 11.84861946105957, 1.9392236471176147, 12.550495147705078, 36.615089416503906, 36.02654266357422, 7.704000473022461, 14.515438079833984, 11.701154708862305, 9.35035514831543, 20.926729202270508, 8.950024604797363, 10.11721420288086, 5.381677627563477, 16.471323013305664, 33.56017303466797], "tokens": ["178", "01", ")", "\n", "\n", "Today", "\n", "\n", "A", " mix", " of", " clouds", " and", " sun", " during", " the", " morning", " will", " give", " way", " to", " cloudy", " skies", " this", " afternoon", ".", " S", "light", " chance", " of", " a", " rain", " shower", ".", " High", " near", " 65", "F", ".", " Winds", " light", " and", " variable", "..", "\n", "\n", "Tonight", "\n", "\n", "Rain", ".", " Low", " 56", "F", ".", " Winds", " light", " and", " variable", ".", " Chance", " of", " rain", " 100"]},
])

const neuron_dir = normalize_dir([
{"activations": [-0.05224863067269325, -0.04931551218032837, -0.0509580597281456, -0.05107538402080536, -0.05197487398982048, -0.05068430304527283, -0.03597959876060486, -0.04947194457054138, 0.1963234543800354, -0.0003076719876844436, -0.04955016076564789, -0.04994124546647072, -0.0073376866057515144, -0.031345266848802567, -0.0503714345395565, 0.05533818528056145, 0.0035001891665160656, 0.026085207238793373, 0.02354317158460617, -0.04908086359500885, -0.05232684686779976, -0.05181844159960747, 0.016454799100756645, -0.050136785954236984, -0.05213130638003349, -0.052405066788196564, -0.027023805305361748, -0.052287738770246506, -0.052405066788196564, -0.03292915225028992, -0.03337889909744263, -0.05044965073466301, 0.12780578434467316, -0.05119270831346512, -0.05232684686779976, -0.05150557681918144, -0.04579576849937439, -0.05056697875261307, -0.03773946687579155, -0.03953844681382179, -0.046499717980623245, -0.024872852489352226, -0.05119270831346512, -0.05111449211835861, -0.05131003260612488, -0.036957304924726486, -0.041845835745334625, -0.03637067973613739, -0.03885405510663986, -0.04509182274341583, 0.13656604290008545, -0.04583487659692764, -0.043723031878471375, -0.04841602221131325, -0.05048875883221626, -0.00872602965682745, 0.10488834977149963, 0.10645267367362976, -0.051544684916734695, -0.04669525846838951, -0.03069998137652874, -0.03721150755882263, -0.05232684686779976, 0.013834546320140362], "tokens": ["\n", "\n", "Today", "\n", "\n", "Consider", "able", " clouds", " this", " morning", ".", " Some", " decrease", " in", " clouds", " later", " in", " the", " day", ".", " A", " stray", " shower", " or", " thunder", "storm", " is", " possible", ".", " High", " near", " 85", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph", "..", "\n", "\n", "Tonight", "\n", "\n", "Part", "ly", " cloudy", " skies", ".", " A", " stray", " shower", " or", " thunder", "storm", " is", " possible", ".", " Low", " 71"]},
{"activations": [-0.048611562699079514, -0.051427360624074936, -0.018752409145236015, -0.051036275923252106, -0.042588893324136734, -0.034024182707071304, -0.04822048172354698, -0.04958926886320114, -0.052405066788196564, -0.04943283647298813, -0.024149348959326744, -0.04305819049477577, -0.04732099175453186, -0.0434492751955986, -0.051270924508571625, -0.05174022540450096, -0.03212743252515793, -0.04896353930234909, 0.10919025540351868, -0.04571755230426788, -0.04943283647298813, -0.05181844159960747, 0.15963990986347198, -0.051544684916734695, -0.02917475998401642, -0.04982392117381096, -0.049276404082775116, -0.018156008794903755, -0.042471569031476974, -0.03596004471182823, -0.03359399363398552, -0.03728972375392914, -0.004744320642203093, -0.03699641302227974, -0.052287738770246506, -0.04872889071702957, -0.04923729598522186, -0.04857245460152626, -0.050136785954236984, -0.05236595869064331, -0.04923729598522186, -0.052287738770246506, -0.020013650879263878, 0.04430965706706047, 0.04262800142168999, -0.04880710691213608, -0.03341800719499588, 0.07156810909509659, -0.050762519240379333, -0.043840356171131134, 0.05271793156862259, 0.06331627070903778, -0.012123559601604939, 0.00911711249500513, -0.01575085148215294, -0.05209219828248024, 0.34540411829948425, -0.0028084616642445326, 0.033554885536432266, 0.21431325376033783, 0.2506057024002075, 0.07985906302928925, -0.052287738770246506, 0.046499717980623245], "tokens": ["\n", "\n", "Sc", "attered", " showers", " and", " thunder", "storms", ".", " A", " few", " storms", " may", " be", " severe", ".", " High", " 78", "F", ".", " Winds", " SS", "W", " at", " 5", " to", " 10", " mph", ".", " Chance", " of", " rain", " 50", "%", "..", "\n", "\n", "Tonight", "\n", "\n", "Thunder", "storms", " likely", " this", " evening", ".", " Then", " the", " chance", " of", " scattered", " thunder", "storms", " overnight", ".", " A", " few", " storms", " may", " be", " severe", ".", " Low", " 59"]},
{"activations": [-0.05232684686779976, -0.05220952257514, -0.051779333502054214, -0.04798583313822746, -0.033339790999889374, -0.04986302927136421, -0.04994124546647072, -0.05236595869064331, -0.04739920794963837, -0.05080162733793259, -0.0503714345395565, -0.05236595869064331, -0.02751265838742256, -0.044857170432806015, -0.03500188887119293, -0.040085963904857635, -0.04994124546647072, 0.14681239426136017, -0.05029321834445, 0.03936246037483215, -0.03081730753183365, 0.002615364734083414, 0.31662043929100037, 0.018116900697350502, -0.03337889909744263, -0.048767998814582825, -0.019045721739530563, -0.03064131923019886, 0.007073706015944481, 0.22980011999607086, 0.011673814617097378, -0.04442698135972023, -0.035725392401218414, -0.033105138689279556, -0.008237176574766636, -0.04606952890753746, -0.032088324427604675, -0.03734838590025902, -0.04865067079663277, -0.03482590243220329, -0.03582316264510155, -0.05107538402080536, -0.052405066788196564, -0.029428964480757713, -0.030993293970823288, -0.05209219828248024, -0.050762519240379333, -0.04943283647298813, -0.04833780601620674, 0.005944455042481422, -0.046617042273283005, -0.05146646872162819, -0.04254978522658348, 0.046382393687963486, 0.1609695851802826, 0.010960089042782784, -0.046108637005090714, -0.048767998814582825, -0.04329284280538559, -0.046617042273283005, -0.01458737999200821, -0.03511921688914299, -0.013071934692561626, 0.0013993423199281096], "tokens": [",", " IA", " (", "5", "27", "32", ")", "\n", "\n", "Today", "\n", "\n", "Rain", " early", "...", "then", " remaining", " cloudy", " with", " showers", " in", " the", " afternoon", ".", " Thunder", " possible", ".", " High", " 66", "F", ".", " Winds", " light", " and", " variable", ".", " Chance", " of", " rain", " 80", "%", "..", "\n", "\n", "Tonight", "\n", "\n", "Thunder", "storms", " likely", ".", " Low", " around", " 60", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph"]},
{"activations": [-0.04004685580730438, -0.04982392117381096, -0.05209219828248024, -0.03357443958520889, -0.04055526480078697, -0.030172020196914673, -0.052013982087373734, -0.04571755230426788, -0.052405066788196564, -0.04982392117381096, -0.05220952257514, 0.018341772258281708, 0.04798583313822746, -0.0326945036649704, -0.047751180827617645, -0.05005856975913048, -0.05224863067269325, -0.041845835745334625, -0.047516532242298126, -0.034747686237096786, -0.0472036674618721, -0.033496223390102386, -0.029096543788909912, -0.02455998584628105, 0.21728548407554626, -0.040711697190999985, -0.0491199716925621, -0.05232684686779976, -0.046617042273283005, -0.05236595869064331, -0.018683969974517822, -0.04669525846838951, -0.02917475998401642, 0.003541741520166397, -0.052013982087373734, -0.05072341114282608, -0.03302692249417305, -0.015164227224886417, -0.052013982087373734, -0.05111449211835861, -0.047907616943120956, 0.056433215737342834, -0.031227944418787956, -0.005054742097854614, -0.005387162324041128, 0.1295265555381775, 0.07199830561876297, -0.04540468752384186, -0.052405066788196564, 0.16425468027591705, 0.013629227876663208, 0.11169318109750748, 0.007318132556974888, -0.032831382006406784, 0.11536935716867447, 0.2543601095676422, -0.030230682343244553, -0.01605393923819065, 0.06335537880659103, -0.04583487659692764, 0.05080162733793259, 0.028509920462965965, 0.15455582737922668, 0.028666352853178978], "tokens": [",", " OK", " (", "740", "78", ")", "\n", "\n", "Today", "\n", "\n", "Cloud", "y", " early", " with", " pe", "eks", " of", " sunshine", " expected", " late", ".", " High", " 79", "F", ".", " Winds", " S", "SE", " at", " 5", " to", " 10", " mph", "..", "\n", "\n", "Tonight", "\n", "\n", "A", " shower", " or", " two", " possible", " this", " evening", " with", " partly", " cloudy", " skies", " overnight", ".", " Low", " 57", "F", ".", " Winds", " E", " at", " 5", " to", " 10", " mph"]},
{"activations": [-0.031247498467564583, -0.048611562699079514, -0.03834564611315727, -0.052405066788196564, -0.04552201181650162, -0.05205309018492699, -0.05146646872162819, -0.05244417488574982, -0.05123181641101837, -0.05158379301428795, -0.04618685320019722, -0.0336526557803154, 0.07508785277605057, -0.03640978783369064, 0.0059884521178901196, -0.009078004397451878, 0.07919422537088394, -0.041102778166532516, -0.05181844159960747, -0.05033232644200325, -0.026867372915148735, 0.24935424327850342, -0.03768080472946167, 0.2606174349784851, 0.11896731704473495, 0.01801913045346737, -0.021998394280672073, -0.03926469013094902, -0.050918951630592346, -0.04829869791865349, -0.05209219828248024, 0.014000756666064262, 0.03183412179350853, -0.022389477118849754, -0.030269792303442955, -0.0402815043926239, -0.05185754969716072, 0.12733648717403412, -0.0361555851995945, -0.05111449211835861, -0.02899877354502678, -0.03468902409076691, -0.01569218747317791, 0.051779333502054214, -0.05224863067269325, -0.04114188626408577, -0.0258114505559206, -0.04872889071702957, -0.045756660401821136, -0.03691819682717323, -0.04399678856134415, -0.02688692696392536, 0.09581523388624191, 0.1611260175704956, -0.04356659948825836, -0.036859530955553055, -0.042862650007009506, -0.052405066788196564, 0.03973399102687836, -0.051036275923252106, -0.04630417749285698, -0.04446608945727348, -0.05181844159960747, 0.014773144386708736], "tokens": ["178", "01", ")", "\n", "\n", "Today", "\n", "\n", "A", " mix", " of", " clouds", " and", " sun", " during", " the", " morning", " will", " give", " way", " to", " cloudy", " skies", " this", " afternoon", ".", " S", "light", " chance", " of", " a", " rain", " shower", ".", " High", " near", " 65", "F", ".", " Winds", " light", " and", " variable", "..", "\n", "\n", "Tonight", "\n", "\n", "Rain", ".", " Low", " 56", "F", ".", " Winds", " light", " and", " variable", ".", " Chance", " of", " rain", " 100"]},
])

export default ({ }) => {
  return (
    <div style={{display: 'flex', flexDirection: 'row'}}>
      <div>
        <b>Direction</b>
        <div style={{fontSize: '10px', lineHeight: '1.5em'}}>


          {found_dir.map((tokens, i) => {
            return (
              <TokenHeatmap key={i} tokens={tokens}/>
            )
          })}

        </div>
      </div>
      <div>


        <b>Most correlated neuron</b>

          {neuron_dir.map((tokens, i) => {
            return (
              <TokenHeatmap key={i} tokens={tokens}/>
            )
          })}


        <div style={{fontSize: '10px', lineHeight: '1.5em'}}>

        </div>
      </div>
    </div>

  )
}
